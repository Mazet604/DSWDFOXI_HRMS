import{r as s,T as F,g as N,h as R,i as M,o as a,c as u,a as p,u as v,b as e,e as T,t as h,f as k,d as q,F as O,j as D,w as V,n as U,Z as Y,k as z}from"./app-DkGv4u98.js";import{_ as L}from"./TextInput-BwRd-Z6l.js";import{_ as Z}from"./InputError-H4dJ04Tk.js";import{P as I}from"./PrimaryButton-DoGFTer1.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"flex items-center justify-center min-h-screen bg-center bg-cover",style:{"background-image":"url('/images/bgwhiteredblue.png')"}},G={key:0,class:"w-full max-w-lg p-6 bg-white rounded-lg shadow-md sm:p-8 lg:p-10 sm:max-w-xl lg:max-w-2xl"},H=e("div",{class:"mb-6 text-2xl font-semibold text-center lg:text-3xl"},"OTP Verification",-1),J=e("p",{class:"mb-8 text-center text-gray-500"},"Please enter the OTP sent to your email.",-1),K={class:"mb-4 text-center text-red-500"},Q={key:0,class:"mb-4 text-sm font-medium text-green-600"},W={key:1,class:"mb-4 text-sm font-medium text-red-600"},X={class:"mt-6 text-center"},ee={class:"flex justify-center mt-2 space-x-3"},te={class:"mt-8"},se=e("span",{class:"w-full text-center"},"VERIFY OTP",-1),oe={key:1,class:"w-full max-w-lg p-6 bg-white rounded-lg shadow-md sm:p-8 lg:p-10 sm:max-w-xl lg:max-w-2xl"},le=e("div",{class:"mb-6 text-2xl font-semibold text-center lg:text-3xl"},"Password Reset Verification",-1),ae=e("p",{class:"mb-8 text-center text-gray-500"},"Please wait... ",-1),re=[le,ae],ne={key:2,class:"w-full max-w-lg p-6 bg-white rounded-lg shadow-md sm:p-8 lg:p-10 sm:max-w-xl lg:max-w-2xl"},ie=e("div",{class:"mb-6 text-2xl font-semibold text-center lg:text-3xl"},"OTP Expired",-1),ue=e("p",{class:"mb-8 text-center text-gray-500"},"Your OTP has expired. Please click the button below to resend a new OTP.",-1),ce={class:"flex justify-center"},xe={__name:"OTP",props:{context:{type:String,required:!0},otpSent:{type:Boolean,default:!1}},setup(B){const E=B,r=s(["","","","","",""]),c=s(null),w=s(null),n=s(!1),x=s(!1),f=s(!1),i=s(E.context),d=s(300),b=s(null),o=F({otp:"",context:i.value}),y=()=>{b.value=setInterval(()=>{d.value>0?d.value--:(clearInterval(b.value),x.value=!0)},1e3)},S=()=>{f.value||(c.value=null,f.value=!0,i.value==="forgot-password"?(n.value=!0,setTimeout(()=>{P()},5e3)):i.value==="login"&&P())},P=()=>{o.otp=r.value.join(""),o.context=i.value,o.post(route("otp.verify"),{onError:t=>{c.value="Invalid OTP. Please try again.",n.value=!1,f.value=!1},onSuccess:t=>{t.props.success?i.value==="forgot-password"&&t.props.passwordReset?n.value=!0:i.value==="login"&&(window.location.href=route("dashboard").url()):(c.value="Invalid OTP. Please try again.",n.value=!1,f.value=!1)}})},C=()=>{o.post(route("otp.resend"),{onSuccess:t=>{x.value=!1,n.value=!1,d.value=5,y()},onError:t=>{c.value="Failed to resend OTP. Please try again."}})},$=(t,l)=>{const g=t.target.value;/^\d$/.test(g)?(r.value[l]=g,l<r.value.length-1&&document.getElementById("otp"+(l+1)).focus()):r.value[l]=""};N(i,t=>{o.context=t}),R(()=>{y()});const j=M(()=>{const t=Math.floor(d.value/60),l=d.value%60;return`${t}:${l<10?"0":""}${l}`});return(t,l)=>(a(),u(O,null,[p(v(Y),{title:"OTP Verification"}),e("div",A,[!x.value&&!n.value?(a(),u("div",G,[H,J,e("div",K,[T(" OTP expires in: "),e("strong",null,h(j.value),1)]),w.value?(a(),u("div",Q,h(w.value),1)):k("",!0),c.value?(a(),u("div",W,h(c.value),1)):k("",!0),e("form",{onSubmit:q(S,["prevent"])},[e("div",X,[e("div",ee,[(a(!0),u(O,null,D(r.value,(g,m)=>(a(),z(L,{key:m,id:"otp"+m,type:"text",class:"text-2xl text-center border border-gray-300 rounded-lg w-14 h-14 focus:outline-none focus:ring-2 focus:ring-blue-500",modelValue:r.value[m],"onUpdate:modelValue":_=>r.value[m]=_,maxlength:"1",onInput:_=>$(_,m),required:""},null,8,["id","modelValue","onUpdate:modelValue","onInput"]))),128))]),p(Z,{class:"mt-2",message:v(o).errors.otp},null,8,["message"])]),e("div",te,[p(I,{class:U([{"opacity-50":v(o).processing},"w-full py-3 text-center text-white rounded-full bg-gradient-to-r from-pink-500 to-blue-500 hover:from-pink-600 hover:to-blue-600"]),disabled:v(o).processing},{default:V(()=>[se]),_:1},8,["class","disabled"])])],32)])):n.value?(a(),u("div",oe,re)):(a(),u("div",ne,[ie,ue,e("div",ce,[p(I,{onClick:C,class:"w-full py-3 text-center text-white rounded-full bg-gradient-to-r from-pink-500 to-blue-500 hover:from-pink-600 hover:to-blue-600"},{default:V(()=>[T(" Resend OTP ")]),_:1})])]))])],64))}};export{xe as default};
