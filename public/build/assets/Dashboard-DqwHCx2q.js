import{s as T,z as N,A as P,q as u,m as v,o as a,h as k,w as m,b as e,n as U,a as f,t as p,x as d,y as c,B as b,c as r,g as h,F as g,f as x,p as D,i as I}from"./app-eoM-cUP6.js";import{A as C}from"./AppLayout-DPw2E_2k.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={components:{AppLayout:C,Button:T,TabView:N,TabPanel:P},data(){return{fullName:"",empPosition:"",profilePictureUrl:"",fields:{empUser:"",empID:"",firstName:"",middleName:"",lastName:"",suffix:"",citizenship:"",birthday:"",placeOfBirth:"",sex:"",civilStatus:"",height:"",weight:"",bloodType:"",zipcode:"",block:"",villsub:"",mobilenum:"",telnum:"",emailadd:"",pass:"",zipcode:"",block:"",villsub:"",Region:"",Province:""},isEditing:!1,originalFields:{},errorMessage:"",showUpdateDialog:!1,showSuccessDialog:!1,sexOptions:[],civilStatusOptions:[],bloodTypeOptions:[],extOptions:[],RegionOptions:[],ProvinceOptions:[],activeTab:0,activeSubTab:"",searchQuery:"",isHovered:!1,isUnblurred:!1,selectedFile:null,empPic:""}},computed:{calculatedAge(){if(!this.fields.birthday)return"";const l=new Date,i=new Date(this.fields.birthday);let _=l.getFullYear()-i.getFullYear();const E=l.getMonth()-i.getMonth();return(E<0||E===0&&l.getDate()<i.getDate())&&_--,_}},methods:{validateMobileNumber(){this.fields.mobilenum=this.fields.mobilenum.replace(/\D/g,"").slice(0,10)},validateTelephoneNumber(){this.fields.telnum=this.fields.telnum.replace(/\D/g,"").slice(0,7)},async fetchSexOptions(){try{const l=await fetch("/dropdown/sex-options");if(!l.ok)throw new Error("Failed to fetch sex options");this.sexOptions=await l.json()}catch(l){console.error(l)}},async fetchCivilStatusOptions(){try{const l=await fetch("/dropdown/civilstatus-options");if(!l.ok)throw new Error("Failed to fetch civil status options");this.civilStatusOptions=await l.json()}catch(l){console.error(l)}},async fetchBloodTypeOptions(){try{const l=await fetch("/dropdown/bloodtype-options");if(!l.ok)throw new Error("Failed to fetch blood type options");this.bloodTypeOptions=await l.json()}catch(l){console.error(l)}},async fetchExtOptions(){try{const l=await fetch("/dropdown/ext-options");if(!l.ok)throw new Error("Failed to fetch suffix options");this.extOptions=await l.json()}catch(l){console.error(l)}},async fetchRegionOptions(){try{const l=await u.get("/employee/region-options");this.RegionOptions=l.data}catch{this.errorMessage="Failed to load regions."}},async fetchProvinceOptions(){try{const l=await u.get("/employee/province-options");this.ProvinceOptions=l.data}catch{this.errorMessage="Failed to load provinces."}},async fetchFullName(){try{const l=await u.get("/employee/fullname");this.fullName=l.data.fullName,this.empPosition=l.data.empPosition}catch{this.errorMessage="Failed to load full name."}},async fetchPersonalInfo(){try{const l=await u.get("/employee/PersonalInfo");this.fields.empUser=l.data.empUser,this.fields.empID=l.data.empID,this.fields.firstName=l.data.firstName,this.fields.middleName=l.data.middleName,this.fields.lastName=l.data.lastName,this.fields.suffix=l.data.suffix,this.fields.citizenship=l.data.citizenship,this.fields.birthday=l.data.birthday,this.fields.placeOfBirth=l.data.placeOfBirth,this.fields.sex=l.data.sex,this.fields.civilStatus=l.data.civilStatus,this.fields.height=l.data.height,this.fields.weight=l.data.weight,this.fields.bloodType=l.data.bloodType}catch{this.errorMessage="Failed to load personal information."}},async fetchAddress(){try{const l=await u.get("/employee/Address");this.fields.Region=l.data.Region,this.fields.Province=l.data.Province,this.fields.zipcode=l.data.zipcode,this.fields.block=l.data.block,this.fields.villsub=l.data.villsub}catch{this.errorMessage="Failed to load address."}},async fetchSecurityandContact(){try{const l=await u.get("/employee/SecurityandContact");this.fields.mobilenum=l.data.mobilenum,this.fields.telnum=l.data.telnum,this.fields.emailadd=l.data.emailadd}catch{this.errorMessage="Failed to load security and contact information."}},async fetchProfilePicture(){try{const l=await u.get("/get-profile-picture");this.profilePictureUrl=l.data.url?l.data.url:"/storage/uploads/profile-pictures/default-profile.png",console.log("Profile Picture URL:",this.profilePictureUrl)}catch(l){console.error("Error fetching profile picture:",l)}},toggleBlur(){this.isUnblurred=!this.isUnblurred},triggerFileUpload(){this.$refs.fileInput.click()},onFileSelected(l){this.selectedFile=l.target.files[0],this.uploadFile()},async uploadFile(){if(this.selectedFile){const l=new FormData;l.append("file",this.selectedFile);try{const i=await u.post("/upload-profile-picture",l,{headers:{"Content-Type":"multipart/form-data"}});this.profilePictureUrl=i.data.url,console.log("File uploaded successfully:",i.data)}catch(i){console.error("Error uploading file:",i)}}},toggleEditing(){this.isEditing||(this.originalFields=JSON.parse(JSON.stringify(this.fields))),this.isEditing=!this.isEditing},cancelEditing(){this.fields=JSON.parse(JSON.stringify(this.originalFields)),this.isEditing=!1},confirmUpdate(){this.showUpdateDialog=!0},hideUpdateDialog(){this.showUpdateDialog=!1},hideSuccessDialog(){this.showSuccessDialog=!1},async saveProfile(){try{await u.patch("/employee/updateProfile",this.fields),this.isEditing=!1,this.showUpdateDialog=!1,this.showSuccessDialog=!0}catch{this.errorMessage="Failed to update profile. Please try again.",this.showUpdateDialog=!1}},search(){const l=this.searchQuery.toLowerCase();l.includes("personal info")?(this.activeSubTab="personal",this.activeTab=0):l.includes("address")?(this.activeSubTab="address",this.activeTab=1):l.includes("security")?(this.activeSubTab="security",this.activeTab=2):alert("No matching tab found.")}},mounted(){this.fetchFullName(),this.fetchPersonalInfo(),this.fetchSecurityandContact(),this.fetchAddress(),this.fetchProfilePicture()},created(){this.fetchSexOptions(),this.fetchCivilStatusOptions(),this.fetchBloodTypeOptions(),this.fetchExtOptions(),this.fetchRegionOptions(),this.fetchProvinceOptions()}},o=l=>(D("data-v-f0fa8367"),l=l(),I(),l),A={class:"grid w-full grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"},B={class:"relative col-span-1"},M={class:"relative group"},R=["src"],L=o(()=>e("i",{class:"text-4xl text-white fas fa-eye"},null,-1)),z=[L],H={class:"col-span-1 md:col-span-2"},j={class:"mb-4 text-3xl font-bold lg:text-5xl"},Y={class:"mb-4 text-gray-600"},G={class:"border-box"},J={class:"grid grid-cols-4 gap-4"},K={class:"col-span-2"},Q=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"USER NAME",-1)),Z={class:"col-span-2"},q=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"EMPLOYEE ID",-1)),W=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"FIRST NAME",-1)),X=["disabled"],$=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"MIDDLE NAME",-1)),ee=["disabled"],te=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"LAST NAME",-1)),se=["disabled"],le=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"CITIZENSHIP",-1)),ie=["disabled"],oe=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"BIRTHDAY",-1)),de=["disabled"],ne=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"AGE",-1)),ae=["value"],re=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"PLACE OF BIRTH",-1)),ce=["disabled"],ue=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"SEX",-1)),pe=["disabled"],fe=["value"],be=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"CIVIL STATUS",-1)),he=["disabled"],ge=["value"],me=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"HEIGHT(M)",-1)),ye=["disabled"],ve=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"WEIGHT(KG)",-1)),xe=["disabled"],_e=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"BLOOD TYPE",-1)),Ee=["disabled"],we=["value"],ke={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Ue=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"REGION",-1)),Se=["disabled"],Oe=["value"],Te=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"PROVINCE",-1)),Ne=["disabled"],Pe=["value"],De=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"CITY",-1)),Ie=["disabled"],Ce=["value"],Fe=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"ZIP CODE",-1)),Ve=["disabled"],Ae=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"BLOCK/STREET/PUROK",-1)),Be=["disabled"],Me=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"VILLAGE SUBDIVISION",-1)),Re=["disabled"],Le=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"BARANGAY",-1)),ze=["disabled"],He=["value"],je={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Ye=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"MOBILE NUMBER",-1)),Ge=["disabled"],Je=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"TELEPHONE NUMBER",-1)),Ke=["disabled"],Qe=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"EMAIL ADDRESS",-1)),Ze=["disabled"],qe={key:1,class:"float-right mt-6 space-x-4"},We={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-800 bg-opacity-75"},Xe={class:"w-full max-w-lg overflow-hidden transition-all transform bg-white rounded-lg"},$e={class:"p-4"},et=o(()=>e("div",{class:"text-center"},[e("i",{class:"mb-4 text-4xl fas fa-exclamation-triangle",style:{color:"red"}}),e("h2",{class:"mb-4 text-xl font-semibold"},"Are you sure you want to update?"),e("p",{class:"mb-4"},"If you are certain, click 'Confirm' to proceed. Otherwise, click 'Cancel' to go back and review the information.")],-1)),tt={class:"flex justify-center gap-4"},st={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-800 bg-opacity-75"},lt={class:"w-full max-w-lg overflow-hidden transition-all transform bg-white rounded-lg"},it={class:"p-4"},ot=o(()=>e("div",{class:"text-center"},[e("i",{class:"mb-4 text-4xl fas fa-check-circle",style:{color:"green"}}),e("h2",{class:"mb-4 text-xl font-semibold"},"Updated Successfully!"),e("p",{class:"mb-4"},"Details have been successfully updated. Press 'Back' to continue.")],-1)),dt={class:"flex justify-center"};function nt(l,i,_,E,s,n){const y=v("Button"),w=v("TabPanel"),S=v("TabView"),O=v("AppLayout");return a(),k(O,null,{default:m(()=>[e("div",A,[e("div",B,[e("div",M,[e("img",{alt:"Profile Picture",src:s.profilePictureUrl,class:U(["w-full rounded-lg",{"blur-md":!s.isUnblurred}]),height:"300",width:"300"},null,10,R),e("div",{class:U(["absolute inset-0 flex items-center justify-center transition-opacity duration-300",{"opacity-0":!s.isHovered,"opacity-100":s.isHovered}])},[e("button",{onClick:i[0]||(i[0]=(...t)=>n.toggleBlur&&n.toggleBlur(...t)),class:"p-2 bg-gray-800 bg-opacity-75 rounded-full"},z)],2)]),e("input",{type:"file",ref:"fileInput",onChange:i[1]||(i[1]=(...t)=>n.onFileSelected&&n.onFileSelected(...t)),class:"hidden"},null,544),f(y,{label:"Upload Photo",class:"w-full py-2 mt-4 text-white rounded-lg bg-gradient-to-r from-pink-500 to-purple-500",onClick:n.triggerFileUpload},null,8,["onClick"])]),e("div",H,[e("h1",j,p(s.fullName),1),e("p",Y,p(s.empPosition),1),e("div",G,[f(S,{activeIndex:s.activeTab,"onUpdate:activeIndex":i[27]||(i[27]=t=>s.activeTab=t),class:"no-background"},{default:m(()=>[f(w,{header:"PERSONAL INFO",active:s.activeSubTab==="personal"},{default:m(()=>[e("div",J,[e("div",K,[Q,d(e("input",{type:"text",class:"text-center input-field text-color","onUpdate:modelValue":i[2]||(i[2]=t=>s.fields.empUser=t),disabled:""},null,512),[[c,s.fields.empUser]])]),e("div",Z,[q,d(e("input",{type:"text",class:"text-center input-field text-color","onUpdate:modelValue":i[3]||(i[3]=t=>s.fields.empID=t),disabled:""},null,512),[[c,s.fields.empID]])]),e("div",null,[W,d(e("input",{type:"text",class:"text-center input-field","onUpdate:modelValue":i[4]||(i[4]=t=>s.fields.firstName=t),disabled:!s.isEditing},null,8,X),[[c,s.fields.firstName]])]),e("div",null,[$,d(e("input",{type:"text",class:"text-center input-field","onUpdate:modelValue":i[5]||(i[5]=t=>s.fields.middleName=t),disabled:!s.isEditing},null,8,ee),[[c,s.fields.middleName]])]),e("div",null,[te,d(e("input",{type:"text",class:"text-center input-field","onUpdate:modelValue":i[6]||(i[6]=t=>s.fields.lastName=t),disabled:!s.isEditing},null,8,se),[[c,s.fields.lastName]])]),e("div",null,[le,d(e("input",{type:"text",class:"text-center input-field","onUpdate:modelValue":i[7]||(i[7]=t=>s.fields.citizenship=t),disabled:!s.isEditing},null,8,ie),[[c,s.fields.citizenship]])]),e("div",null,[oe,d(e("input",{type:"date",class:"text-center input-field","onUpdate:modelValue":i[8]||(i[8]=t=>s.fields.birthday=t),disabled:!s.isEditing},null,8,de),[[c,s.fields.birthday]])]),e("div",null,[ne,e("input",{type:"text",class:"text-center input-field text-color",value:n.calculatedAge,disabled:""},null,8,ae)]),e("div",null,[re,d(e("input",{type:"text",class:"text-center input-field","onUpdate:modelValue":i[9]||(i[9]=t=>s.fields.placeOfBirth=t),disabled:!s.isEditing},null,8,ce),[[c,s.fields.placeOfBirth]])]),e("div",null,[ue,d(e("select",{class:"text-center input-field","onUpdate:modelValue":i[10]||(i[10]=t=>s.fields.sex=t),disabled:!s.isEditing},[(a(!0),r(g,null,h(s.sexOptions,t=>(a(),r("option",{key:t.value,value:t.value},p(t.label),9,fe))),128))],8,pe),[[b,s.fields.sex]])]),e("div",null,[be,d(e("select",{class:"text-center input-field","onUpdate:modelValue":i[11]||(i[11]=t=>s.fields.civilStatus=t),disabled:!s.isEditing},[(a(!0),r(g,null,h(s.civilStatusOptions,t=>(a(),r("option",{key:t.value,value:t.value},p(t.label),9,ge))),128))],8,he),[[b,s.fields.civilStatus]])]),e("div",null,[me,d(e("input",{type:"number",step:"0.01",class:"text-center input-field","onUpdate:modelValue":i[12]||(i[12]=t=>s.fields.height=t),disabled:!s.isEditing},null,8,ye),[[c,s.fields.height]])]),e("div",null,[ve,d(e("input",{type:"number",class:"text-center input-field","onUpdate:modelValue":i[13]||(i[13]=t=>s.fields.weight=t),disabled:!s.isEditing},null,8,xe),[[c,s.fields.weight]])]),e("div",null,[_e,d(e("select",{class:"text-center input-field","onUpdate:modelValue":i[14]||(i[14]=t=>s.fields.bloodType=t),disabled:!s.isEditing},[(a(!0),r(g,null,h(s.bloodTypeOptions,t=>(a(),r("option",{key:t.value,value:t.value},p(t.label),9,we))),128))],8,Ee),[[b,s.fields.bloodType]])])])]),_:1},8,["active"]),f(w,{header:"ADDRESS",active:s.activeSubTab==="address"},{default:m(()=>[e("div",ke,[e("div",null,[Ue,d(e("select",{class:"input-field","onUpdate:modelValue":i[15]||(i[15]=t=>s.fields.Region=t),disabled:!s.isEditing},[(a(!0),r(g,null,h(s.RegionOptions,t=>(a(),r("option",{key:t.value,value:t.value},p(t.label),9,Oe))),128))],8,Se),[[b,s.fields.Region]])]),e("div",null,[Te,d(e("select",{class:"input-field","onUpdate:modelValue":i[16]||(i[16]=t=>s.fields.Province=t),disabled:!s.isEditing},[(a(!0),r(g,null,h(s.ProvinceOptions,t=>(a(),r("option",{key:t.value,value:t.value},p(t.label),9,Pe))),128))],8,Ne),[[b,s.fields.Province]])]),e("div",null,[De,d(e("select",{class:"input-field","onUpdate:modelValue":i[17]||(i[17]=t=>s.fields.City=t),disabled:!s.isEditing},[(a(!0),r(g,null,h(l.CityOptions,t=>(a(),r("option",{key:t.value,value:t.value},p(t.label),9,Ce))),128))],8,Ie),[[b,s.fields.City]])]),e("div",null,[Fe,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[18]||(i[18]=t=>s.fields.zipcode=t),disabled:!s.isEditing},null,8,Ve),[[c,s.fields.zipcode]])]),e("div",null,[Ae,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[19]||(i[19]=t=>s.fields.block=t),disabled:!s.isEditing},null,8,Be),[[c,s.fields.block]])]),e("div",null,[Me,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[20]||(i[20]=t=>s.fields.villsub=t),disabled:!s.isEditing},null,8,Re),[[c,s.fields.villsub]])]),e("div",null,[Le,d(e("select",{class:"input-field","onUpdate:modelValue":i[21]||(i[21]=t=>s.fields.Barangay=t),disabled:!s.isEditing},[(a(!0),r(g,null,h(l.BarangayOptions,t=>(a(),r("option",{key:t.value,value:t.value},p(t.label),9,He))),128))],8,ze),[[b,s.fields.Barangay]])])])]),_:1},8,["active"]),f(w,{header:"SECURITY & CONTACT DETAILS",active:s.activeSubTab==="security"},{default:m(()=>[e("div",je,[e("div",null,[Ye,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[22]||(i[22]=t=>s.fields.mobilenum=t),maxlength:"9",onInput:i[23]||(i[23]=(...t)=>n.validateMobileNumber&&n.validateMobileNumber(...t)),disabled:!s.isEditing},null,40,Ge),[[c,s.fields.mobilenum]])]),e("div",null,[Je,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[24]||(i[24]=t=>s.fields.telnum=t),maxlength:"7",onInput:i[25]||(i[25]=(...t)=>n.validateTelephoneNumber&&n.validateTelephoneNumber(...t)),disabled:!s.isEditing},null,40,Ke),[[c,s.fields.telnum]])]),e("div",null,[Qe,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[26]||(i[26]=t=>s.fields.emailadd=t),disabled:!s.isEditing},null,8,Ze),[[c,s.fields.emailadd]])])])]),_:1},8,["active"])]),_:1},8,["activeIndex"])]),s.isEditing?x("",!0):(a(),k(y,{key:0,label:"UPDATE",class:"float-right px-8 py-2 mt-6 text-white bg-green-500 rounded-lg update-button",onClick:n.toggleEditing},null,8,["onClick"])),s.isEditing?(a(),r("div",qe,[f(y,{label:"CANCEL",class:"px-8 py-2 text-white rounded-lg custom-cancel-button",onClick:n.cancelEditing},null,8,["onClick"]),f(y,{label:"SAVE",class:"px-8 py-2 text-white bg-blue-500 rounded-lg update-button",onClick:n.confirmUpdate},null,8,["onClick"])])):x("",!0)])]),s.showUpdateDialog?(a(),r("div",We,[e("div",Xe,[e("div",$e,[et,e("div",tt,[e("button",{onClick:i[28]||(i[28]=(...t)=>n.hideUpdateDialog&&n.hideUpdateDialog(...t)),class:"px-4 py-2 text-gray-700 bg-gray-300 rounded hover:bg-gray-400"}," Cancel "),e("button",{onClick:i[29]||(i[29]=(...t)=>n.saveProfile&&n.saveProfile(...t)),class:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700"}," Confirm ")])])])])):x("",!0),s.showSuccessDialog?(a(),r("div",st,[e("div",lt,[e("div",it,[ot,e("div",dt,[e("button",{onClick:i[30]||(i[30]=(...t)=>n.hideSuccessDialog&&n.hideSuccessDialog(...t)),class:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700"}," Back ")])])])])):x("",!0)]),_:1})}const ut=F(V,[["render",nt],["__scopeId","data-v-f0fa8367"]]);export{ut as default};
