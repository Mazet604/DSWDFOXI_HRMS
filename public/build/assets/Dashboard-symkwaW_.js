import{s as T,z as N,A as D,q as h,m as y,o as n,h as k,w as g,b as e,n as S,a as m,t as u,x as d,y as c,B as b,c as a,g as f,F as p,f as x,p as I,i as C}from"./app-HOEJ0mf3.js";import{A as P}from"./AppLayout-P30fC74G.js";import{_ as V}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={components:{AppLayout:P,Button:T,TabView:N,TabPanel:D},data(){return{fullName:"",empPosition:"",fields:{empUser:"",empID:"",firstName:"",middleName:"",lastName:"",suffix:"",citizenship:"",birthday:"",placeOfBirth:"",sex:"",civilStatus:"",height:"",weight:"",bloodType:"",zipcode:"",block:"",villsub:"",mobilenum:"",telnum:"",emailadd:"",pass:"",zipcode:"",block:"",villsub:"",selectedRegion:"",selectedProvince:""},isEditing:!1,originalFields:{},errorMessage:"",showUpdateDialog:!1,showSuccessDialog:!1,sexOptions:[],civilStatusOptions:[],bloodTypeOptions:[],extOptions:[],selectedRegionOptions:[],selectedProvinceOptions:[],activeTab:0,activeSubTab:"",searchQuery:"",isHovered:!1,isUnblurred:!1}},computed:{calculatedAge(){if(!this.fields.birthday)return"";const l=new Date,i=new Date(this.fields.birthday);let _=l.getFullYear()-i.getFullYear();const E=l.getMonth()-i.getMonth();return(E<0||E===0&&l.getDate()<i.getDate())&&_--,_}},methods:{validateMobileNumber(){this.fields.mobilenum=this.fields.mobilenum.replace(/\D/g,"").slice(0,10)},validateTelephoneNumber(){this.fields.telnum=this.fields.telnum.replace(/\D/g,"").slice(0,7)},async fetchSexOptions(){try{const l=await fetch("/dropdown/sex-options");if(!l.ok)throw new Error("Failed to fetch sex options");this.sexOptions=await l.json()}catch(l){console.error(l)}},async fetchCivilStatusOptions(){try{const l=await fetch("/dropdown/civilstatus-options");if(!l.ok)throw new Error("Failed to fetch civil status options");this.civilStatusOptions=await l.json()}catch(l){console.error(l)}},async fetchBloodTypeOptions(){try{const l=await fetch("/dropdown/bloodtype-options");if(!l.ok)throw new Error("Failed to fetch blood type options");this.bloodTypeOptions=await l.json()}catch(l){console.error(l)}},async fetchExtOptions(){try{const l=await fetch("/dropdown/ext-options");if(!l.ok)throw new Error("Failed to fetch suffix options");this.extOptions=await l.json()}catch(l){console.error(l)}},async fetchSelectedRegionOptions(){try{const l=await h.get("/employee/selectedregion-options");this.selectedRegionOptions=l.data}catch{this.errorMessage="Failed to load regions."}},async fetchSelectedProvinceOptions(){try{const l=await h.get("/employee/selectedprovince-options");this.selectedProvinceOptions=l.data}catch{this.errorMessage="Failed to load provinces."}},async fetchFullName(){try{const l=await h.get("/employee/fullname");this.fullName=l.data.fullName,this.empPosition=l.data.empPosition}catch{this.errorMessage="Failed to load full name."}},async fetchPersonalInfo(){try{const l=await h.get("/employee/PersonalInfo");this.fields.empUser=l.data.empUser,this.fields.empID=l.data.empID,this.fields.firstName=l.data.firstName,this.fields.middleName=l.data.middleName,this.fields.lastName=l.data.lastName,this.fields.suffix=l.data.suffix,this.fields.citizenship=l.data.citizenship,this.fields.birthday=l.data.birthday,this.fields.placeOfBirth=l.data.placeOfBirth,this.fields.sex=l.data.sex,this.fields.civilStatus=l.data.civilStatus,this.fields.height=l.data.height,this.fields.weight=l.data.weight,this.fields.bloodType=l.data.bloodType}catch{this.errorMessage="Failed to load personal information."}},async fetchAddress(){try{const l=await h.get("/employee/Address");this.fields.selectedRegion=l.data.selectedRegion,this.fields.selectedProvince=l.data.selectedProvince,this.fields.zipcode=l.data.zipcode,this.fields.block=l.data.block,this.fields.villsub=l.data.villsub}catch{this.errorMessage="Failed to load address."}},async fetchSecurityandContact(){try{const l=await h.get("/employee/SecurityandContact");this.fields.mobilenum=l.data.mobilenum,this.fields.telnum=l.data.telnum,this.fields.emailadd=l.data.emailadd}catch{this.errorMessage="Failed to load security and contact information."}},toggleBlur(){this.isUnblurred=!this.isUnblurred},toggleEditing(){this.isEditing||(this.originalFields=JSON.parse(JSON.stringify(this.fields))),this.isEditing=!this.isEditing},cancelEditing(){this.fields=JSON.parse(JSON.stringify(this.originalFields)),this.isEditing=!1},confirmUpdate(){this.showUpdateDialog=!0},hideUpdateDialog(){this.showUpdateDialog=!1},hideSuccessDialog(){this.showSuccessDialog=!1},async saveProfile(){try{await h.patch("/employee/updateProfile",this.fields),this.isEditing=!1,this.showUpdateDialog=!1,this.showSuccessDialog=!0}catch{this.errorMessage="Failed to update profile. Please try again.",this.showUpdateDialog=!1}},search(){const l=this.searchQuery.toLowerCase();l.includes("personal info")?(this.activeSubTab="personal",this.activeTab=0):l.includes("address")?(this.activeSubTab="address",this.activeTab=1):l.includes("security")?(this.activeSubTab="security",this.activeTab=2):alert("No matching tab found.")}},mounted(){this.fetchFullName(),this.fetchPersonalInfo(),this.fetchSecurityandContact(),this.fetchAddress()},created(){this.fetchSexOptions(),this.fetchCivilStatusOptions(),this.fetchBloodTypeOptions(),this.fetchExtOptions(),this.fetchSelectedRegionOptions(),this.fetchSelectedProvinceOptions()}},o=l=>(I("data-v-ee380191"),l=l(),C(),l),B={class:"grid w-full grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"},M={class:"relative col-span-1"},F=o(()=>e("i",{class:"text-4xl text-white fas fa-eye"},null,-1)),R=[F],L={class:"col-span-1 md:col-span-2"},z={class:"mb-4 text-3xl font-bold lg:text-5xl"},H={class:"mb-4 text-gray-600"},j={class:"border-box"},Y={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},G=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"USER NAME",-1)),J=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"EMPLOYEE ID",-1)),K=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"FIRST NAME",-1)),Q=["disabled"],X=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"MIDDLE NAME",-1)),Z=["disabled"],q=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"LAST NAME",-1)),W=["disabled"],$=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"Age",-1)),ee=["value"],te=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"SUFFIX",-1)),se=["disabled"],le=["value"],ie=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"CITIZENSHIP",-1)),oe=["disabled"],de=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"BIRTHDAY",-1)),ne=["disabled"],ae=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"PLACE OF BIRTH",-1)),re=["disabled"],ce=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"SEX",-1)),ue=["disabled"],be=["value"],fe=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"CIVIL STATUS",-1)),pe=["disabled"],he=["value"],me=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"HEIGHT(M)",-1)),ge=["disabled"],ve=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"WEIGHT(KG)",-1)),ye=["disabled"],xe=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"BLOOD TYPE",-1)),_e=["disabled"],Ee=["value"],we={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},ke=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"REGION",-1)),Se=["disabled"],Oe=["value"],Ue=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"PROVINCE",-1)),Te=["disabled"],Ne=["value"],De=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"CITY",-1)),Ie=["disabled"],Ce=["value"],Pe=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"ZIP CODE",-1)),Ve=["disabled"],Ae=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"BLOCK/STREET/PUROK",-1)),Be=["disabled"],Me=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"VILLAGE SUBDIVISION",-1)),Fe=["disabled"],Re=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"BARANGAY",-1)),Le=["disabled"],ze=["value"],He={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},je=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"MOBILE NUMBER",-1)),Ye=["disabled"],Ge=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"TELEPHONE NUMBER",-1)),Je=["disabled"],Ke=o(()=>e("label",{class:"block mb-2 text-sm font-bold text-gray-700"},"EMAIL ADDRESS",-1)),Qe=["disabled"],Xe={key:1,class:"float-right mt-6 space-x-4"},Ze={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-800 bg-opacity-75"},qe={class:"w-full max-w-lg overflow-hidden transition-all transform bg-white rounded-lg"},We={class:"p-4"},$e=o(()=>e("div",{class:"text-center"},[e("i",{class:"mb-4 text-4xl fas fa-exclamation-triangle",style:{color:"red"}}),e("h2",{class:"mb-4 text-xl font-semibold"},"Are you sure you want to update?"),e("p",{class:"mb-4"},"If you are certain, click 'Confirm' to proceed. Otherwise, click 'Cancel' to go back and review the information.")],-1)),et={class:"flex justify-center gap-4"},tt={key:1,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-800 bg-opacity-75"},st={class:"w-full max-w-lg overflow-hidden transition-all transform bg-white rounded-lg"},lt={class:"p-4"},it=o(()=>e("div",{class:"text-center"},[e("i",{class:"mb-4 text-4xl fas fa-check-circle",style:{color:"green"}}),e("h2",{class:"mb-4 text-xl font-semibold"},"Updated Successfully!"),e("p",{class:"mb-4"},"Details have been successfully updated. Press 'Back' to continue.")],-1)),ot={class:"flex justify-center"};function dt(l,i,_,E,s,r){const v=y("Button"),w=y("TabPanel"),O=y("TabView"),U=y("AppLayout");return n(),k(U,null,{default:g(()=>[e("div",B,[e("div",M,[e("div",{class:"relative group",onMouseenter:i[1]||(i[1]=t=>s.isHovered=!0),onMouseleave:i[2]||(i[2]=t=>s.isHovered=!1)},[e("img",{alt:"Profile Picture",class:S(["w-full rounded-lg",{"blur-md":!s.isUnblurred}]),height:"300",src:"/images/profile-picture.webp",width:"300"},null,2),e("div",{class:S(["absolute inset-0 flex items-center justify-center transition-opacity duration-300",{"opacity-0":!s.isHovered,"opacity-100":s.isHovered}])},[e("button",{onClick:i[0]||(i[0]=(...t)=>r.toggleBlur&&r.toggleBlur(...t)),class:"p-2 bg-gray-800 bg-opacity-75 rounded-full"},R)],2)],32),m(v,{label:"Upload Photo",class:"w-full py-2 mt-4 text-white rounded-lg bg-gradient-to-r from-pink-500 to-purple-500"})]),e("div",L,[e("h1",z,u(s.fullName),1),e("p",H,u(s.empPosition),1),e("div",j,[m(O,{activeIndex:s.activeTab,"onUpdate:activeIndex":i[29]||(i[29]=t=>s.activeTab=t),class:"no-background"},{default:g(()=>[m(w,{header:"PERSONAL INFO",active:s.activeSubTab==="personal"},{default:g(()=>[e("div",Y,[e("div",null,[G,d(e("input",{type:"text",class:"input-field text-color","onUpdate:modelValue":i[3]||(i[3]=t=>s.fields.empUser=t),disabled:""},null,512),[[c,s.fields.empUser]])]),e("div",null,[J,d(e("input",{type:"text",class:"input-field text-color","onUpdate:modelValue":i[4]||(i[4]=t=>s.fields.empID=t),disabled:""},null,512),[[c,s.fields.empID]])]),e("div",null,[K,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[5]||(i[5]=t=>s.fields.firstName=t),disabled:!s.isEditing},null,8,Q),[[c,s.fields.firstName]])]),e("div",null,[X,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[6]||(i[6]=t=>s.fields.middleName=t),disabled:!s.isEditing},null,8,Z),[[c,s.fields.middleName]])]),e("div",null,[q,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[7]||(i[7]=t=>s.fields.lastName=t),disabled:!s.isEditing},null,8,W),[[c,s.fields.lastName]])]),e("div",null,[$,e("input",{type:"text",class:"input-field text-color",value:r.calculatedAge,disabled:""},null,8,ee)]),e("div",null,[te,d(e("select",{class:"input-field","onUpdate:modelValue":i[8]||(i[8]=t=>s.fields.suffix=t),disabled:!s.isEditing},[(n(!0),a(p,null,f(s.extOptions,t=>(n(),a("option",{key:t.value,value:t.value},u(t.label),9,le))),128))],8,se),[[b,s.fields.suffix]])]),e("div",null,[ie,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[9]||(i[9]=t=>s.fields.citizenship=t),disabled:!s.isEditing},null,8,oe),[[c,s.fields.citizenship]])]),e("div",null,[de,d(e("input",{type:"date",class:"input-field","onUpdate:modelValue":i[10]||(i[10]=t=>s.fields.birthday=t),disabled:!s.isEditing},null,8,ne),[[c,s.fields.birthday]])]),e("div",null,[ae,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[11]||(i[11]=t=>s.fields.placeOfBirth=t),disabled:!s.isEditing},null,8,re),[[c,s.fields.placeOfBirth]])]),e("div",null,[ce,d(e("select",{class:"input-field","onUpdate:modelValue":i[12]||(i[12]=t=>s.fields.sex=t),disabled:!s.isEditing},[(n(!0),a(p,null,f(s.sexOptions,t=>(n(),a("option",{key:t.value,value:t.value},u(t.label),9,be))),128))],8,ue),[[b,s.fields.sex]])]),e("div",null,[fe,d(e("select",{class:"input-field","onUpdate:modelValue":i[13]||(i[13]=t=>s.fields.civilStatus=t),disabled:!s.isEditing},[(n(!0),a(p,null,f(s.civilStatusOptions,t=>(n(),a("option",{key:t.value,value:t.value},u(t.label),9,he))),128))],8,pe),[[b,s.fields.civilStatus]])]),e("div",null,[me,d(e("input",{type:"number",step:"0.01",class:"input-field","onUpdate:modelValue":i[14]||(i[14]=t=>s.fields.height=t),disabled:!s.isEditing},null,8,ge),[[c,s.fields.height]])]),e("div",null,[ve,d(e("input",{type:"number",class:"input-field","onUpdate:modelValue":i[15]||(i[15]=t=>s.fields.weight=t),disabled:!s.isEditing},null,8,ye),[[c,s.fields.weight]])]),e("div",null,[xe,d(e("select",{class:"input-field","onUpdate:modelValue":i[16]||(i[16]=t=>s.fields.bloodType=t),disabled:!s.isEditing},[(n(!0),a(p,null,f(s.bloodTypeOptions,t=>(n(),a("option",{key:t.value,value:t.value},u(t.label),9,Ee))),128))],8,_e),[[b,s.fields.bloodType]])])])]),_:1},8,["active"]),m(w,{header:"ADDRESS",active:s.activeSubTab==="address"},{default:g(()=>[e("div",we,[e("div",null,[ke,d(e("select",{class:"input-field","onUpdate:modelValue":i[17]||(i[17]=t=>s.fields.selectedRegion=t),disabled:!s.isEditing},[(n(!0),a(p,null,f(s.selectedRegionOptions,t=>(n(),a("option",{key:t.value,value:t.value},u(t.label),9,Oe))),128))],8,Se),[[b,s.fields.selectedRegion]])]),e("div",null,[Ue,d(e("select",{class:"input-field","onUpdate:modelValue":i[18]||(i[18]=t=>s.fields.selectedProvince=t),disabled:!s.isEditing},[(n(!0),a(p,null,f(s.selectedProvinceOptions,t=>(n(),a("option",{key:t.value,value:t.value},u(t.label),9,Ne))),128))],8,Te),[[b,s.fields.selectedProvince]])]),e("div",null,[De,d(e("select",{class:"input-field","onUpdate:modelValue":i[19]||(i[19]=t=>s.fields.selectedCity=t),disabled:!s.isEditing},[(n(!0),a(p,null,f(l.selectedCityOptions,t=>(n(),a("option",{key:t.value,value:t.value},u(t.label),9,Ce))),128))],8,Ie),[[b,s.fields.selectedCity]])]),e("div",null,[Pe,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[20]||(i[20]=t=>s.fields.zipcode=t),disabled:!s.isEditing},null,8,Ve),[[c,s.fields.zipcode]])]),e("div",null,[Ae,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[21]||(i[21]=t=>s.fields.block=t),disabled:!s.isEditing},null,8,Be),[[c,s.fields.block]])]),e("div",null,[Me,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[22]||(i[22]=t=>s.fields.villsub=t),disabled:!s.isEditing},null,8,Fe),[[c,s.fields.villsub]])]),e("div",null,[Re,d(e("select",{class:"input-field","onUpdate:modelValue":i[23]||(i[23]=t=>s.fields.selectedBarangay=t),disabled:!s.isEditing},[(n(!0),a(p,null,f(l.selectedBarangayOptions,t=>(n(),a("option",{key:t.value,value:t.value},u(t.label),9,ze))),128))],8,Le),[[b,s.fields.selectedBarangay]])])])]),_:1},8,["active"]),m(w,{header:"SECURITY & CONTACT DETAILS",active:s.activeSubTab==="security"},{default:g(()=>[e("div",He,[e("div",null,[je,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[24]||(i[24]=t=>s.fields.mobilenum=t),maxlength:"9",onInput:i[25]||(i[25]=(...t)=>r.validateMobileNumber&&r.validateMobileNumber(...t)),disabled:!s.isEditing},null,40,Ye),[[c,s.fields.mobilenum]])]),e("div",null,[Ge,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[26]||(i[26]=t=>s.fields.telnum=t),maxlength:"7",onInput:i[27]||(i[27]=(...t)=>r.validateTelephoneNumber&&r.validateTelephoneNumber(...t)),disabled:!s.isEditing},null,40,Je),[[c,s.fields.telnum]])]),e("div",null,[Ke,d(e("input",{type:"text",class:"input-field","onUpdate:modelValue":i[28]||(i[28]=t=>s.fields.emailadd=t),disabled:!s.isEditing},null,8,Qe),[[c,s.fields.emailadd]])])])]),_:1},8,["active"])]),_:1},8,["activeIndex"])]),s.isEditing?x("",!0):(n(),k(v,{key:0,label:"UPDATE",class:"float-right px-8 py-2 mt-6 text-white bg-green-500 rounded-lg update-button",onClick:r.toggleEditing},null,8,["onClick"])),s.isEditing?(n(),a("div",Xe,[m(v,{label:"CANCEL",class:"px-8 py-2 text-white rounded-lg custom-cancel-button",onClick:r.cancelEditing},null,8,["onClick"]),m(v,{label:"SAVE",class:"px-8 py-2 text-white bg-blue-500 rounded-lg update-button",onClick:r.confirmUpdate},null,8,["onClick"])])):x("",!0)])]),s.showUpdateDialog?(n(),a("div",Ze,[e("div",qe,[e("div",We,[$e,e("div",et,[e("button",{onClick:i[30]||(i[30]=(...t)=>r.hideUpdateDialog&&r.hideUpdateDialog(...t)),class:"px-4 py-2 text-gray-700 bg-gray-300 rounded hover:bg-gray-400"}," Cancel "),e("button",{onClick:i[31]||(i[31]=(...t)=>r.saveProfile&&r.saveProfile(...t)),class:"px-4 py-2 text-white bg-red-600 rounded hover:bg-red-700"}," Confirm ")])])])])):x("",!0),s.showSuccessDialog?(n(),a("div",tt,[e("div",st,[e("div",lt,[it,e("div",ot,[e("button",{onClick:i[32]||(i[32]=(...t)=>r.hideSuccessDialog&&r.hideSuccessDialog(...t)),class:"px-4 py-2 text-white bg-blue-600 rounded hover:bg-blue-700"}," Back ")])])])])):x("",!0)]),_:1})}const ct=V(A,[["render",dt],["__scopeId","data-v-ee380191"]]);export{ct as default};
